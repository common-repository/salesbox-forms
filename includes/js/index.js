!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=window.wp.apiFetch},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=function(e){return Math.abs(parseInt(e,10))},i=n(0),s=n.n(i),c=function(e,t){var n=new Map([["init","init"],["validation_failed","invalid"],["acceptance_missing","unaccepted"],["spam","spam"],["aborted","aborted"],["mail_sent","sent"],["mail_failed","failed"],["submitting","submitting"],["resetting","resetting"]]);n.has(t)&&(t=n.get(t)),Array.from(n.values()).includes(t)||(t=(t=t.replace(/[^0-9a-z]+/i," ").trim()).replace(/\s+/,"-"),t="custom-".concat(t));var r=e.getAttribute("data-status");return e.sbf.status=t,e.setAttribute("data-status",t),e.classList.add(t),r&&r!==t&&e.classList.remove(r),t},u=function(e,t,n){var r=new CustomEvent("sbf".concat(t),{bubbles:!0,detail:n});"string"==typeof e&&(e=document.querySelector(e)),e.dispatchEvent(r)};function f(e,t){var n=new FormData(e);t.submitter&&t.submitter.name&&n.append(t.submitter.name,t.submitter.value);var r={contactFormId:e.sbf.id,pluginVersion:e.sbf.pluginVersion,contactFormLocale:e.sbf.locale,unitTag:e.sbf.unitTag,containerPostId:e.sbf.containerPost,status:e.sbf.status,inputs:Array.from(n,(function(e){var t=e[0],n=e[1];return!t.match(/^_/)&&{name:t,value:n}})).filter((function(e){return!1!==e})),formData:n},a=function(t){var n=document.createElement("li");n.setAttribute("id",t.error_id),t.idref?n.insertAdjacentHTML("beforeend",'<a href="#'.concat(t.idref,'">').concat(t.message,"</a>")):n.insertAdjacentText("beforeend",t.message),e.sbf.parent.querySelector(".screen-reader-response ul").appendChild(n)},o=function(t){var n=e.querySelector(t.into),r=n.querySelector(".sbf-form-control");r.classList.add("sbf-not-valid"),r.setAttribute("aria-invalid","true"),r.setAttribute("aria-describedby",t.error_id);var a=document.createElement("span");a.setAttribute("class","sbf-not-valid-tip"),a.setAttribute("aria-hidden","true"),a.insertAdjacentText("beforeend",t.message),n.appendChild(a),r.closest(".use-floating-validation-tip")&&(r.addEventListener("focus",(function(e){a.setAttribute("style","display: none")})),a.addEventListener("mouseover",(function(e){a.setAttribute("style","display: none")})))};s()({path:"salesbox-crm-form/v1/contact-forms/".concat(e.sbf.id,"/feedback"),method:"POST",body:n,sbf:{endpoint:"feedback",form:e,detail:r}}).then((function(t){var n=c(e,t.status);return r.status=t.status,r.apiResponse=t,["invalid","unaccepted","spam","aborted"].includes(n)?u(e.sbf.parent,n,r):["sent","failed"].includes(n)&&u(e.sbf.parent,"mail".concat(n),r),u(e.sbf.parent,"submit",r),t})).then((function(t){t.posted_data_hash&&(e.querySelector('input[name="_sbf_posted_data_hash"]').value=t.posted_data_hash),"mail_sent"===t.status&&e.reset(),t.invalid_fields&&(t.invalid_fields.forEach(a),t.invalid_fields.forEach(o)),e.sbf.parent.querySelector('.screen-reader-response [role="status"]').insertAdjacentText("beforeend",t.message),e.querySelectorAll(".sbf-response-output").forEach((function(e){e.innerText=t.message}))})).catch((function(e){return console.error(e)}))}var l=function(e){return new Promise((function(t,n){s()({path:"salesbox-crm-form/v1/contact-forms/".concat(e.sbf.id,"/metadata"),method:"GET"}).then((function(e){return t(e),e})).catch((function(e){console.error(e),n(e)}))}))};s.a.use((function(e,t){if(e.sbf&&"feedback"===e.sbf.endpoint){var n=e.sbf,r=n.form,a=n.detail;d(r),u(r.sbf.parent,"beforesubmit",a),c(r,"submitting")}return t(e)}));var d=function(e){e.sbf.parent.querySelector('.screen-reader-response [role="status"]').innerText="",e.sbf.parent.querySelector(".screen-reader-response ul").innerText="",e.querySelectorAll(".sbf-not-valid-tip").forEach((function(e){e.remove()})),e.querySelectorAll(".sbf-form-control").forEach((function(e){e.setAttribute("aria-invalid","false"),e.removeAttribute("aria-describedby"),e.classList.remove("sbf-not-valid")})),e.querySelectorAll(".sbf-response-output").forEach((function(e){e.innerText=""}))};function b(e){var t=new FormData(e),n={contactFormId:e.sbf.id,pluginVersion:e.sbf.pluginVersion,contactFormLocale:e.sbf.locale,unitTag:e.sbf.unitTag,containerPostId:e.sbf.containerPost,status:e.sbf.status,inputs:Array.from(t,(function(e){var t=e[0],n=e[1];return!t.match(/^_/)&&{name:t,value:n}})).filter((function(e){return!1!==e})),formData:t};s()({path:"salesbox-crm-form/v1/contact-forms/".concat(e.sbf.id,"/refill"),method:"GET",sbf:{endpoint:"refill",form:e,detail:n}}).then((function(t){"sent"===n.status?c(e,"mail_sent"):c(e,"init"),n.apiResponse=t,u(e.sbf.parent,"reset",n)})).catch((function(e){return console.error(e)}))}s.a.use((function(e,t){if(e.sbf&&"refill"===e.sbf.endpoint){var n=e.sbf,r=n.form;n.detail,d(r),c(r,"resetting")}return t(e)}));var p=function(e,t){var n=function(n){var r=t[n];e.querySelectorAll('input[name="'.concat(n,'"]')).forEach((function(e){e.value=""})),e.querySelectorAll("img.sbf-captcha-".concat(n)).forEach((function(e){e.setAttribute("src",r)}));var a=/([0-9]+)\.(png|gif|jpeg)$/.exec(r);a&&e.querySelectorAll('input[name="_sbf_captcha_challenge_'.concat(n,'"]')).forEach((function(e){e.value=a[1]}))};for(var r in t)n(r)},v=function(e,t){var n=function(n){var r=t[n][0],a=t[n][1];e.querySelectorAll(".sbf-form-control-wrap.".concat(n)).forEach((function(e){e.querySelector('input[name="'.concat(n,'"]')).value="",e.querySelector(".sbf-quiz-label").textContent=r,e.querySelector('input[name="_sbf_quiz_answer_'.concat(n,'"]')).value=a}))};for(var r in t)n(r)},m=function(e){if(e.querySelector(".sbf-acceptance")&&!e.classList.contains("sbf-acceptance-as-validation")){var t=function(){var t=!0;e.querySelectorAll(".sbf-acceptance").forEach((function(e){if(t&&!e.classList.contains("optional")){var n=e.querySelector('input[type="checkbox"]');(e.classList.contains("invert")&&n.checked||!e.classList.contains("invert")&&!n.checked)&&(t=!1)}})),e.querySelectorAll(".sbf-submit").forEach((function(e){e.disabled=!t}))};t(),"init"===e.sbf.status&&e.addEventListener("change",(function(e){return t()}))}},h=function(e){var t=function(e,t){var n=o(e.getAttribute("data-starting-value")),r=o(e.getAttribute("data-maximum-value")),a=o(e.getAttribute("data-minimum-value")),i=e.classList.contains("down")?n-t.value.length:t.value.length;e.setAttribute("data-current-value",i),e.innerText=i,r&&r<t.value.length?e.classList.add("too-long"):e.classList.remove("too-long"),a&&t.value.length<a?e.classList.add("too-short"):e.classList.remove("too-short")};e.querySelectorAll(".sbf-character-count").forEach((function(n){var r=n.getAttribute("data-target-name"),a=e.querySelector('[name="'.concat(r,'"]'));a&&(a.value=a.defaultValue,t(n,a),"init"===e.sbf.status&&a.addEventListener("keyup",(function(e){t(n,a)})))}))};function g(e){var t=new FormData(e);e.sbf={id:o(t.get("_sbf")),status:e.getAttribute("data-status"),pluginVersion:t.get("_sbf_version"),locale:t.get("_sbf_locale"),unitTag:t.get("_sbf_unit_tag"),containerPost:o(t.get("_sbf_container_post")),parent:e.closest(".sbf")},e.querySelectorAll(".sbf-submit").forEach((function(e){e.insertAdjacentHTML("afterend",'<span class="ajax-loader"></span>')}));var n={},r=e.querySelector("select[name=NAME_PRODUCT_GROUP]"),a=e.querySelector("select[name=NAME_PRODUCT]");r&&a&&(sbf.getMetadata(e).then((function(e){n=e})),r.onchange=function(e){var t=e.target.value;if(n.productGroupList&&n.productList){var r=n.productGroupList.find((function(e){return e.text==t})),o=n.productList;r&&(o=o.filter((function(e){return e.productGroupId==r.uuid})));var i='<option value="">---</option>';o.forEach((function(e){i+='\n\t\t\t\t\t<option value="'.concat(e.text,'">').concat(e.text,"</option>\n\t\t\t\t")})),a.innerHTML=i}}),function(e){e.querySelectorAll(".sbf-exclusive-checkbox").forEach((function(t){t.addEventListener("change",(function(t){var n=t.target.getAttribute("name");e.querySelectorAll('input[type="checkbox"][name="'.concat(n,'"]')).forEach((function(e){e!==t.target&&(e.checked=!1)}))}))}))}(e),function(e){e.querySelectorAll(".has-free-text").forEach((function(t){var n=t.querySelector("input.sbf-free-text"),r=t.querySelector('input[type="checkbox"], input[type="radio"]');n.disabled=!r.checked,e.addEventListener("change",(function(e){n.disabled=!r.checked,e.target===r&&r.checked&&n.focus()}))}))}(e),function(e){e.querySelectorAll(".sbf-validates-as-url").forEach((function(e){e.addEventListener("change",(function(t){var n=e.value.trim();n&&!n.match(/^[a-z][a-z0-9.+-]*:/i)&&-1!==n.indexOf(".")&&(n="http://"+(n=n.replace(/^\/+/,""))),e.value=n}))}))}(e),m(e),h(e),window.addEventListener("load",(function(t){sbf.cached&&e.reset()})),e.addEventListener("reset",(function(t){m(e),h(e),sbf.reset(e)})),e.addEventListener("submit",(function(t){var n=t.submitter;sbf.submit(e,{submitter:n}),t.preventDefault()})),e.sbf.parent.addEventListener("sbfsubmit",(function(t){t.detail.apiResponse.captcha&&p(e,t.detail.apiResponse.captcha),t.detail.apiResponse.quiz&&v(e,t.detail.apiResponse.quiz)})),e.sbf.parent.addEventListener("sbfreset",(function(t){t.detail.apiResponse.captcha&&p(e,t.detail.apiResponse.captcha),t.detail.apiResponse.quiz&&v(e,t.detail.apiResponse.quiz)}))}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}document.addEventListener("DOMContentLoaded",(function(e){var t;sbf=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({init:g,submit:f,reset:b,getMetadata:l},null!==(t=sbf)&&void 0!==t?t:{}),document.querySelectorAll(".sbf > form").forEach((function(e){return sbf.init(e)}))}))}]);